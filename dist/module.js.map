{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///external \"@grafana/ui\"","webpack:///external \"@grafana/data\"","webpack:///external \"emotion\"","webpack:///external \"lodash\"","webpack:///external \"@grafana/runtime\"","webpack:///external \"prismjs\"","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///../node_modules/rxjs/_esm5/internal/util/isFunction.js","webpack:///../node_modules/rxjs/_esm5/internal/config.js","webpack:///../node_modules/rxjs/_esm5/internal/util/hostReportError.js","webpack:///../node_modules/rxjs/_esm5/internal/Observer.js","webpack:///../node_modules/rxjs/_esm5/internal/util/isArray.js","webpack:///../node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","webpack:///../node_modules/rxjs/_esm5/internal/Subscription.js","webpack:///../node_modules/rxjs/_esm5/internal/util/isObject.js","webpack:///../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","webpack:///../node_modules/rxjs/_esm5/internal/Subscriber.js","webpack:///../node_modules/rxjs/_esm5/internal/operators/map.js","webpack:///./types.ts","webpack:///./utils/transform.ts","webpack:///./utils/flatten.ts","webpack:///./syntax.ts","webpack:///./language_provider.ts","webpack:///./DataSource.ts","webpack:///./ConfigEditor.tsx","webpack:///./components/QueryEditor/constants.ts","webpack:///./components/QueryEditor/XRayQueryField.tsx","webpack:///./components/QueryEditor/QuerySection.tsx","webpack:///./components/QueryEditor/XrayLinks.tsx","webpack:///./components/QueryEditor/QueryEditorForm.tsx","webpack:///./components/QueryEditor/useInitQuery.ts","webpack:///./components/CheatSheet.tsx","webpack:///./module.ts","webpack:///./components/QueryEditor/QueryEditor.tsx","webpack:///./components/QueryEditor/useGroups.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__4__","__WEBPACK_EXTERNAL_MODULE__5__","__WEBPACK_EXTERNAL_MODULE__6__","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","__","this","constructor","__assign","assign","arguments","length","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","push","__values","__read","ar","error","__spread","concat","__makeTemplateObject","cooked","raw","isFunction","x","_enable_super_gross_mode_that_will_cause_bad_things","config","undefined","Error","stack","hostReportError","err","setTimeout","empty","closed","useDeprecatedSynchronousErrorHandling","complete","isArray","UnsubscriptionError","UnsubscriptionErrorImpl","errors","message","map","toString","join","Subscription","unsubscribe","_parentOrParents","_subscriptions","_ctorUnsubscribe","_unsubscribe","remove","index","flattenUnsubscriptionErrors","len","sub","add","teardown","subscription","EMPTY","tmp","indexOf","subscriptions","subscriptionIndex","splice","reduce","errs","rxSubscriber","Math","random","_super","Subscriber","destinationOrNext","_this","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","SafeSubscriber","_parentSubscriber","observerOrNext","context","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","fn","parent","XrayQueryType","MapOperator","project","source","subscribe","MapSubscriber","count","transformResponse","data","processes","segments","segment","tags","Document","type","aws","forEach","segmentToTag","getTagsFromAws","http","request","url","URL","hostname","serviceName","gatherProcesses","Segments","subSegmentSpans","parentSpans","segmentSpans","subSegmentProcessId","getSubSegments","callBack","subsegments","subSegment","segmentParent","transformSegment","id","parentSpan","find","ps","spanID","duration","flags","logs","operationName","origin","processID","startTime","start_time","traceID","trace_id","Id","spans","warnings","parentId","references","refType","end_time","stackTraces","getStackTrace","getTagsForSpan","errorIconColor","getIconColor","throttle","cause","exceptions","exception","stackTrace","path","line","annotations","metadata","Boolean","in_progress","fault","output","flattenedObject","prev","keys","newKey","val","keyWithArray","tag","valueToTag","BOOLEAN_KEYWORDS","documentation","NUMBER_KEYWORDS","STRING_KEYWORDS","COMPLEX_KEYWORDS","All_KEYWORDS","tokenizer","function","pattern","RegExp","punctuation","whitespace","boolean","isTraceId","logicalOperator","alias","number","booleanKeyWords","prefixMatch","items","numberKeyWords","stringKeyWords","complexKeyWords","dataSource","initialValues","start","getAllKeywords","suggestions","datasource","provideCompletionItems","instanceSettings","languageProvider","query","processedRequest","templateSrv","targets","target","newTarget","queryType","getTimeSeriesServiceStatistics","intervalMs","resolution","intervalSeconds","floor","replace","scopedVars","group","FilterExpression","getTrace","processRequest","pipe","dataQueryResponse","frame","parseResponse","lift","getGroups","getResource","getRegions","awsRequest","queries","refId","datasourceId","response","text","transformSuggestDataFromTable","options","method","datasourceRequest","getServiceMapUrl","getXrayUrl","getXrayUrlForQuery","timeRange","section","urlQuery","URLSearchParams","append","from","toISOString","to","GroupName","getTraceSummaries","getInsights","queryParams","region","jsonData","defaultRegion","suggestData","results","tables","rows","traceData","fields","values","traceParsed","JSON","parse","parsedSegments","traceParsedForReal","trace","meta","preferredVisualisationType","parseTraceResponse","datasourceUid","links","title","internal","parseTracesListResponse","uid","parseInsightsResponse","urlToAwsConsole","idField","targetBlank","string","display","numeric","getDurationText","hours","minutes","seconds","Select","Input","authProviderOptions","props","state","regions","defaultRegions","render","secureJsonData","className","authProvider","defaultValue","authType","onChange","option","assumeRoleArn","tooltip","placeholder","database","secureJsonFields","accessKey","disabled","variant","onClick","secretKey","traceListOption","insightsOption","traceStatisticsOption","queryTypeOptions","children","getAnalyticsRootCauseResponseTimeService","getAnalyticsRootCauseResponseTimePath","getAnalyticsRootCauseErrorService","getAnalyticsRootCauseErrorPath","getAnalyticsRootCauseErrorMessage","getAnalyticsRootCauseFaultService","getAnalyticsRootCauseFaultPath","getAnalyticsRootCauseFaultMessage","getAnalyticsUser","getAnalyticsUrl","getAnalyticsStatusCode","columnNames","OkCount","TotalCount","dummyAllGroup","GroupARN","plugins","onlyIn","node","getSyntax","XRayQueryField","current","languages","additionalPlugins","portalOrigin","onTypeahead","typeahead","onRunQuery","getStyles","tooltipLink","QuerySection","selectedOptions","styles","style","flex","width","placement","content","href","theme","size","history","queryTypeOptionToQueryType","container","link","XrayLinks","range","rel","queryTypeToQueryTypeOptions","findOptionForQueryType","selected","found","test","trim","queryParamsRow","spring","QueryEditorForm","groups","defaultGroup","allGroups","sameArnGroup","useInitQuery","newQueryType","columns","flexWrap","parseInt","allowCustomValue","closeMenuOnSelect","isClearable","menuPlacement","renderExpression","expr","onClickExample","setConfigEditor","setExploreStartPage","setQueryEditor","setGroups","useGroups"],"mappings":"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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexport var UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._ctorUnsubscribe = true;\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _ctorUnsubscribe = _a._ctorUnsubscribe, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            if (_ctorUnsubscribe) {\n                this._unsubscribe = undefined;\n            }\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = /*@__PURE__*/ (function () {\n    return typeof Symbol === 'function'\n        ? /*@__PURE__*/ Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\n})();\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /*@__PURE__*/ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexport { MapOperator };\nvar MapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=map.js.map\n","import { DataQuery, DataSourceJsonData } from '@grafana/data';\n\nexport type Group = {\n  FilterExpression?: string;\n  GroupARN: string;\n  GroupName: string;\n};\n\n// TODO: would make sense at this point to change to discriminated union type\nexport interface XrayQuery extends DataQuery {\n  queryType?: XrayQueryType;\n  query: string;\n\n  // Used in case of getTimeSeriesServiceStatistics to say which column/series actually return\n  columns?: string[];\n\n  // Interval of the getTimeSeriesServiceStatistics aggregation time bucket\n  resolution?: number;\n\n  // Used in case of getInsights to filter by state\n  state?: string;\n\n  group?: Group;\n}\n\nexport enum XrayQueryType {\n  getTrace = 'getTrace',\n  getTraceSummaries = 'getTraceSummaries',\n  getTimeSeriesServiceStatistics = 'getTimeSeriesServiceStatistics',\n  getAnalyticsRootCauseResponseTimeService = 'getAnalyticsRootCauseResponseTimeService',\n  getAnalyticsRootCauseResponseTimePath = 'getAnalyticsRootCauseResponseTimePath',\n  getAnalyticsRootCauseErrorService = 'getAnalyticsRootCauseErrorService',\n  getAnalyticsRootCauseErrorPath = 'getAnalyticsRootCauseErrorPath',\n  getAnalyticsRootCauseErrorMessage = 'getAnalyticsRootCauseErrorMessage',\n  getAnalyticsRootCauseFaultService = 'getAnalyticsRootCauseFaultService',\n  getAnalyticsRootCauseFaultPath = 'getAnalyticsRootCauseFaultPath',\n  getAnalyticsRootCauseFaultMessage = 'getAnalyticsRootCauseFaultMessage',\n  getAnalyticsUser = 'getAnalyticsUser',\n  getAnalyticsUrl = 'getAnalyticsUrl',\n  getAnalyticsStatusCode = 'getAnalyticsStatusCode',\n  getInsights = 'getInsights',\n}\n\nexport interface XrayJsonData extends DataSourceJsonData {\n  timeField?: string;\n  assumeRoleArn?: string;\n  database?: string;\n  customMetricsNamespaces?: string;\n  profile?: string;\n}\n\nexport interface XraySecureJsonData {\n  accessKey: string;\n  secretKey: string;\n}\n\nexport interface TSDBResponse<T = any> {\n  results: Record<string, TSDBQueryResult<T>>;\n  message?: string;\n}\n\nexport interface TSDBQueryResult<T = any> {\n  refId: string;\n  series: TSDBTimeSeries[];\n  tables: Array<TSDBTable<T>>;\n  dataframes: number[][];\n  error?: string;\n  meta?: any;\n}\n\nexport interface TSDBTimeSeries {\n  name: string;\n  points: TSDBTimePoint[];\n  tags?: Record<string, string>;\n}\n\nexport type TSDBTimePoint = [number, number];\n\nexport interface TSDBTable<T = any> {\n  columns: Array<{ text: string }>;\n  rows: T[];\n}\n\nexport interface MetricRequest {\n  from?: string;\n  to?: string;\n  queries: MetricQuery[];\n  debug?: boolean;\n}\n\nexport interface MetricQuery {\n  [key: string]: any;\n  datasourceId: number;\n  refId?: string;\n  maxDataPoints?: number;\n  intervalMs?: number;\n}\n\nexport type XrayTraceData = {\n  Duration: number;\n  Id: string;\n  Segments: XrayTraceDataSegment[];\n};\n\nexport type XrayTraceDataRaw = {\n  Duration: number;\n  Id: string;\n  Segments: XrayTraceDataSegmentRaw[];\n};\n\nexport type XrayTraceDataSegment = {\n  Document: XrayTraceDataSegmentDocument;\n  Id: string;\n};\n\ntype XrayTraceDataSegmentRaw = {\n  Document: string;\n  Id: string;\n};\n\nexport interface AWS {\n  [index: string]: any;\n  ecs?: {\n    container?: string;\n  };\n  ec2?: {\n    instance_id?: string;\n    availability_zone?: string;\n  };\n  elastic_beanstalk?: {\n    environment_name?: string;\n    version_label?: string;\n    deployment_id?: number;\n  };\n  account_id?: string;\n  retries?: number;\n  region?: string;\n  operation?: string;\n  request_id?: string;\n  table_name?: string;\n  attribute_names_substituted: any[];\n  resource_names: string[];\n}\n\ninterface Request {\n  url: string;\n  method: string;\n  user_agent?: string;\n  client_ip?: string;\n}\n\ninterface Response {\n  status: number;\n  content_length?: number;\n}\n\ninterface Http {\n  request?: Request;\n  response: Response;\n}\n\ninterface Cause {\n  working_directory: string;\n  exceptions?: Array<{ message: string; type: string; stack: Array<{ path: string; line: number; label: string }> }>;\n}\n\nexport type XrayTraceDataSegmentDocument = {\n  // Same as Segment Id\n  id: string;\n  name: string;\n  start_time: number;\n  end_time?: number;\n  in_progress?: boolean;\n  // Same as top level Id\n  trace_id: string;\n  subsegments?: XrayTraceDataSegmentDocument[];\n  parent_id?: string;\n  origin?: string;\n  aws?: AWS;\n  error?: boolean;\n  fault?: boolean;\n  throttle?: boolean;\n  http?: Http;\n  cause?: Cause;\n  annotations?: any;\n  metadata?: any;\n};\n","import { TraceProcess, TraceSpanData, TraceData, TraceSpanReference, TraceKeyValuePair } from '@grafana/data';\nimport { XrayTraceData, XrayTraceDataSegment, XrayTraceDataSegmentDocument, AWS } from 'types';\nimport { keyBy, isPlainObject } from 'lodash';\nimport { flatten } from './flatten';\n\nconst MS_MULTIPLIER = 1000000;\n\n/**\n * Transforms response to format similar to Jaegers as we use Jaeger ui on the frontend.\n */\nexport function transformResponse(data: XrayTraceData): TraceData & { spans: TraceSpanData[] } {\n  const processes = gatherProcesses(data.Segments);\n\n  const subSegmentSpans: TraceSpanData[] = [];\n  // parentSpans is used to group services that has the same name\n  const parentSpans: TraceSpanData[] = [];\n  const segmentSpans = data.Segments.map(segment => {\n    let subSegmentProcessId = segment.Document.name;\n    getSubSegments(segment.Document, (subSegment, segmentParent) => {\n      subSegmentProcessId = processes[subSegment.name]?.serviceName ?? subSegmentProcessId;\n      subSegmentSpans.push(transformSegment(subSegment, subSegmentProcessId, segmentParent.id));\n    });\n\n    let parentSpan = parentSpans.find(ps => ps.spanID === segment.Document.name + segment.Document.origin);\n\n    if (!parentSpan) {\n      parentSpan = {\n        duration: 0,\n        flags: 1,\n        logs: [],\n        operationName: segment.Document.origin ?? segment.Document.name,\n        processID: segment.Document.name,\n        spanID: segment.Document.name + segment.Document.origin,\n        startTime: segment.Document.start_time * MS_MULTIPLIER,\n        traceID: segment.Document.trace_id,\n      };\n      parentSpans.push(parentSpan);\n    }\n\n    return transformSegment(segment.Document, segment.Document.name, parentSpan.spanID);\n  });\n\n  return {\n    processes,\n    traceID: data.Id,\n    spans: [...subSegmentSpans, ...segmentSpans, ...parentSpans],\n    warnings: null,\n  };\n}\n\nfunction getSubSegments(\n  segment: XrayTraceDataSegmentDocument,\n  callBack: (segment: XrayTraceDataSegmentDocument, segmentParent: XrayTraceDataSegmentDocument) => void\n) {\n  if (segment.subsegments?.length) {\n    segment.subsegments.forEach(subSegment => {\n      callBack(subSegment, segment);\n      getSubSegments(subSegment, callBack);\n    });\n  }\n}\n\nfunction transformSegment(segment: XrayTraceDataSegmentDocument, processID: string, parentId?: string): TraceSpanData {\n  let references: TraceSpanReference[] = [];\n  if (parentId) {\n    references.push({ refType: 'CHILD_OF', spanID: parentId, traceID: segment.trace_id });\n  }\n  const duration = segment.end_time ? segment.end_time * MS_MULTIPLIER - segment.start_time * MS_MULTIPLIER : 0;\n  const jaegerSpan: TraceSpanData = {\n    duration,\n    flags: 1,\n    logs: [],\n    operationName: segment.name,\n    processID,\n    startTime: segment.start_time * MS_MULTIPLIER,\n    spanID: segment.id,\n    traceID: segment.trace_id,\n    stackTraces: getStackTrace(segment),\n    tags: getTagsForSpan(segment),\n    references,\n    errorIconColor: getIconColor(segment),\n  };\n\n  return jaegerSpan;\n}\n\nfunction getIconColor(segment: XrayTraceDataSegmentDocument) {\n  if (segment.error) {\n    return '#FFC46E';\n  }\n\n  if (segment.throttle) {\n    return 'mediumpurple';\n  }\n  // Fault should be red so we don't want to set it because it is the default color.\n  return undefined;\n}\n\nfunction getStackTrace(segment: XrayTraceDataSegmentDocument): string[] | undefined {\n  if (!segment.cause?.exceptions) {\n    return undefined;\n  }\n  const stackTraces: string[] = [];\n  segment.cause.exceptions.forEach(exception => {\n    let stackTrace = `${exception.type}: ${exception.message}`;\n    exception.stack?.forEach(stack => {\n      stackTrace = stackTrace.concat(`\\nat ${stack.label} (${stack.path}:${stack.line})`);\n    });\n    stackTraces.push(stackTrace);\n  });\n  return stackTraces;\n}\n\nfunction getTagsForSpan(segment: XrayTraceDataSegmentDocument) {\n  const tags = [\n    ...segmentToTag({ aws: segment.aws }),\n    ...segmentToTag({ http: segment.http }),\n    ...segmentToTag({ annotations: segment.annotations }),\n    ...segmentToTag({ metadata: segment.metadata }),\n    { key: 'in progress', value: Boolean(segment.in_progress), type: 'boolean' },\n  ];\n\n  if (segment.origin) {\n    tags.push({ key: 'origin', value: segment.origin, type: 'string' });\n  }\n\n  const isError = segment.error || segment.fault || segment.throttle;\n\n  if (isError) {\n    tags.push({ key: 'error', value: true, type: 'boolean' });\n  }\n\n  return tags;\n}\n\nfunction segmentToTag(segment: any | undefined) {\n  const result: TraceKeyValuePair[] = [];\n  if (!segment) {\n    return result;\n  }\n\n  const flattenedObject = flatten(segment);\n  Object.keys(flattenedObject).map(key => {\n    const tag = valueToTag(key, flattenedObject[key], typeof flattenedObject[key]);\n    if (tag) {\n      result.push(tag);\n    }\n  });\n  return result;\n}\n\nfunction getTagsFromAws(aws: AWS | undefined) {\n  const tags: TraceKeyValuePair[] = [];\n  if (!aws) {\n    return tags;\n  }\n  /**\n   * see https://docs.aws.amazon.com/xray/latest/devguide/xray-api-segmentdocuments.html#api-segmentdocuments-aws\n   * for possible values on aws property\n   */\n  const awsKeys = ['ec2', 'ecs', 'elastic_beanstalk', 'region'];\n  awsKeys.forEach(key => {\n    if (aws[key]) {\n      if (isPlainObject(aws[key])) {\n        tags.push(...segmentToTag(aws[key]));\n      } else {\n        tags.push({ key, value: aws[key], type: 'string' });\n      }\n    }\n  });\n  return tags;\n}\n\nfunction gatherProcesses(segments: XrayTraceDataSegment[]): Record<string, TraceProcess> {\n  const processes = segments.map(segment => {\n    const tags: TraceKeyValuePair[] = [{ key: 'name', value: segment.Document.name, type: 'string' }];\n    tags.push(...getTagsFromAws(segment.Document.aws));\n    if (segment.Document.http?.request?.url) {\n      const url = new URL(segment.Document.http.request.url);\n      tags.push({ key: 'hostname', value: url.hostname, type: 'string' });\n    }\n    return {\n      serviceName: segment.Document.name,\n      tags,\n    };\n  });\n  return keyBy(processes, 'serviceName');\n}\n\nfunction valueToTag(key: string, value: string | number | undefined, type: string): TraceKeyValuePair | undefined {\n  if (!value || (Array.isArray(value) && !value.length)) {\n    return undefined;\n  }\n  return {\n    key,\n    type,\n    value,\n  };\n}\n","import { isPlainObject } from 'lodash';\n\nexport function flatten(target: object): any {\n  const output: any = {};\n\n  function step(object: any, prev: string | null) {\n    Object.keys(object).forEach(key => {\n      const value = object[key];\n      const newKey = prev ? prev + '.' + key : key;\n\n      if (isPlainObject(value) && Object.keys(value).length) {\n        return step(value, newKey);\n      }\n\n      if (Array.isArray(value)) {\n        value.forEach((val, index) => {\n          const keyWithArray = `${newKey}[${index}]`;\n          if (isPlainObject(val)) {\n            step(val, keyWithArray);\n          } else {\n            output[keyWithArray] = val;\n          }\n        });\n        return;\n      }\n\n      output[newKey] = value;\n    });\n  }\n\n  step(target, null);\n\n  return output;\n}\n","import { CompletionItem } from '@grafana/ui';\nimport { Grammar } from 'prismjs';\n\nexport const BOOLEAN_KEYWORDS: CompletionItem[] = [\n  {\n    label: 'ok',\n    documentation: 'Response status code was 2XX Success.',\n  },\n  { label: 'error', documentation: 'Response status code was 4XX Client Error.' },\n  { label: 'throttle', documentation: 'Response status code was 429 Too Many Requests.' },\n  { label: 'fault', documentation: 'Response status code was 5XX Server Error.' },\n  { label: 'partial', documentation: 'Request has incomplete segments.' },\n  { label: 'inferred', documentation: 'Request has inferred segments.' },\n  { label: 'first', documentation: 'Element is the first of an enumerated list.' },\n];\n\nexport const NUMBER_KEYWORDS: CompletionItem[] = [\n  { label: 'responsetime', documentation: 'Time that the server took to send a response.' },\n  { label: 'duration', documentation: 'Total request duration, including all downstream calls.' },\n  { label: 'http.status', documentation: 'Response status code.' },\n  { label: 'index', documentation: 'Position of an element in an enumerated list.' },\n  {\n    label: 'coverage',\n    documentation:\n      'Decimal percentage of entity response time over root segment response time. Applicable only for response time root cause entities.',\n  },\n];\n\nexport const STRING_KEYWORDS: CompletionItem[] = [\n  { label: 'http.url', documentation: 'Request URL.' },\n  { label: 'http.method', documentation: 'Request method.' },\n  { label: 'http.useragent', documentation: 'Request user agent string.' },\n  { label: 'http.clientip', documentation: \"Requestor's IP address.\" },\n  { label: 'user', documentation: 'Value of the user field on any segment in the trace.' },\n  { label: 'name', documentation: 'The name of a service or exception.' },\n  { label: 'type', documentation: 'Service type.' },\n  { label: 'message', documentation: 'Exception message.' },\n  { label: 'availabilityzone', documentation: 'Value of the availabilityzone field on any segment in the trace.' },\n  { label: 'instance.id', documentation: 'Value of the instance ID field on any segment in the trace.' },\n  { label: 'resource.arn', documentation: 'Value of the resource ARN field on any segment in the trace.' },\n];\n\nexport const STRING_OPERATORS = ['=', '!=', 'CONTAINS', 'BEGINSWITH', 'ENDSWITH'];\n\nexport const COMPLEX_KEYWORDS: CompletionItem[] = [\n  {\n    label: 'service',\n    documentation: `service(_name_) {_filter_}\n     Service with name _name_.\n     Optional curly braces can contain a filter expression that applies to segments created by the service.`,\n  },\n  {\n    label: 'edge',\n    documentation: `edge(_source_, _destination_) {_filter_}\n      Connection between services _source_ and _destination_.\n      Optional curly braces can contain a filter expression that applies to segments on this connection.`,\n  },\n  {\n    label: 'annotation',\n    documentation: `annotation.key\n    Value of an annotation with field _key_.\n    The value of an annotation can be a Boolean, number, or string, so you can use any of the comparison operators of those types.\n    You can't use this keyword in combination with the service or edge keyword.`,\n  },\n  {\n    label: 'json',\n    documentation: `JSON root cause object.\n    See Getting data from AWS X-Ray for steps to create JSON entities programmatically.`,\n  },\n  {\n    label: 'id',\n    documentation: `id(name: \"service-name\", type:\"service::type\")\n    You can use the id function in place of a service name in service and edge filters.`,\n  },\n];\n\nexport const All_KEYWORDS = [...BOOLEAN_KEYWORDS, ...NUMBER_KEYWORDS, ...STRING_KEYWORDS, ...COMPLEX_KEYWORDS];\nexport const tokenizer: Grammar = {\n  function: {\n    pattern: new RegExp(`\\\\b(?:${All_KEYWORDS.map(f => f.label).join('|')})\\\\b`, 'i'),\n  },\n  punctuation: /[{}()`,]/,\n  whitespace: /\\s+/,\n  boolean: /\\btrue|false\\b/,\n  isTraceId: /^\\d-\\w{8}-\\w{24}$/,\n  logicalOperator: {\n    pattern: /\\band|or\\b/i,\n    alias: 'builtin',\n  },\n  number: /\\b-?\\d+((\\.\\d*)?([eE][+-]?\\d+)?)?\\b/,\n};\n","import { LanguageProvider } from '@grafana/data';\nimport { XrayDataSource } from 'DataSource';\nimport { TypeaheadInput, TypeaheadOutput } from '@grafana/ui';\nimport { BOOLEAN_KEYWORDS, NUMBER_KEYWORDS, STRING_KEYWORDS, COMPLEX_KEYWORDS } from 'syntax';\n\nconst booleanKeyWords = { prefixMatch: true, label: 'Boolean Keywords', items: BOOLEAN_KEYWORDS };\nconst numberKeyWords = { prefixMatch: true, label: 'Number Keywords', items: NUMBER_KEYWORDS };\nconst stringKeyWords = { prefixMatch: true, label: 'String Keywords', items: STRING_KEYWORDS };\nconst complexKeyWords = { prefixMatch: true, label: 'Complex Keywords', items: COMPLEX_KEYWORDS };\n\nexport class XRayLanguageProvider extends LanguageProvider {\n  datasource: XrayDataSource;\n\n  constructor(dataSource: XrayDataSource, initialValues?: any) {\n    super();\n    this.datasource = dataSource;\n\n    Object.assign(this, initialValues);\n  }\n\n  request = async () => {\n    return Promise.resolve();\n  };\n\n  start = async () => {\n    return [];\n  };\n\n  /**\n   * Return suggestions based on input that can be then plugged into a type ahead dropdown.\n   */\n  async provideCompletionItems({ value }: TypeaheadInput): Promise<TypeaheadOutput> {\n    if (!value) {\n      return { suggestions: [] };\n    }\n\n    // Get all the keyword for now every time\n    return this.getAllKeywords();\n  }\n\n  private getAllKeywords = (): TypeaheadOutput => {\n    return { suggestions: [booleanKeyWords, numberKeyWords, stringKeyWords, complexKeyWords] };\n  };\n}\n","import {\n  ArrayVector,\n  DataFrame,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  DateTimeDuration,\n  FieldType,\n  MutableDataFrame,\n  toDuration,\n  TimeRange,\n} from '@grafana/data';\nimport { DataSourceWithBackend, getBackendSrv, getTemplateSrv, TemplateSrv } from '@grafana/runtime';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport {\n  Group,\n  MetricRequest,\n  TSDBResponse,\n  XrayJsonData,\n  XrayQuery,\n  XrayQueryType,\n  XrayTraceData,\n  XrayTraceDataRaw,\n  XrayTraceDataSegment,\n} from './types';\nimport { transformResponse } from 'utils/transform';\nimport { XRayLanguageProvider } from 'language_provider';\n\nexport class XrayDataSource extends DataSourceWithBackend<XrayQuery, XrayJsonData> {\n  private instanceSettings: DataSourceInstanceSettings<XrayJsonData>;\n\n  /** @ngInject */\n  constructor(instanceSettings: DataSourceInstanceSettings<XrayJsonData>) {\n    super(instanceSettings);\n\n    this.languageProvider = new XRayLanguageProvider(this);\n    this.instanceSettings = instanceSettings;\n  }\n\n  query(request: DataQueryRequest<XrayQuery>): Observable<DataQueryResponse> {\n    const processedRequest = processRequest(request, getTemplateSrv());\n    const response = super.query(processedRequest);\n    return response.pipe(\n      map(dataQueryResponse => {\n        return {\n          ...dataQueryResponse,\n          data: dataQueryResponse.data.map(frame => this.parseResponse(frame)),\n        };\n      })\n    );\n  }\n\n  async getGroups(): Promise<Group[]> {\n    return this.getResource('/groups');\n  }\n\n  async getRegions(): Promise<Array<{ label: string; value: string; text: string }>> {\n    const response = await this.awsRequest({\n      queries: [\n        {\n          refId: 'getRegions',\n          datasourceId: this.id,\n          type: 'getRegions',\n        },\n      ],\n    });\n    const suggestions = this.transformSuggestDataFromTable(response);\n    return [{ label: 'default', value: 'default', text: 'default' }, ...suggestions];\n  }\n\n  async awsRequest(data: MetricRequest) {\n    const options = {\n      method: 'POST',\n      url: '/api/tsdb/query',\n      data,\n    };\n\n    const result = await getBackendSrv().datasourceRequest(options);\n    return result.data;\n  }\n\n  getServiceMapUrl(): string {\n    return `${this.getXrayUrl()}#/service-map/`;\n  }\n\n  getXrayUrlForQuery(query: XrayQuery, timeRange?: TimeRange): string {\n    let section;\n    let urlQuery: URLSearchParams | undefined = new URLSearchParams();\n    if (query.query) {\n      urlQuery.append('filter', query.query);\n    }\n    if (timeRange) {\n      urlQuery.append('timeRange', `${timeRange.from.toISOString()}~${timeRange.to.toISOString()}`);\n    }\n    if (query.group && query.group.GroupName !== 'Default') {\n      urlQuery.append('group', query.group.GroupName);\n    }\n\n    switch (query.queryType) {\n      case XrayQueryType.getTraceSummaries:\n        section = 'traces';\n        break;\n      case XrayQueryType.getTrace:\n        section = `traces/${query.query}`;\n        urlQuery = undefined;\n        break;\n      case XrayQueryType.getInsights:\n        // Insights don't use url params\n        section = 'insights';\n        urlQuery = undefined;\n        break;\n      // There is not real equivalent for this so lets point to analytics\n      case XrayQueryType.getTimeSeriesServiceStatistics:\n      default:\n        section = 'analytics';\n    }\n\n    // Check if we either dropped the params because they are not needed for some query types or they are empty.\n    let queryParams = urlQuery?.toString()\n      ? // For some reason the analytics view of X-ray does not handle some url escapes\n        '?' +\n        urlQuery\n          ?.toString()\n          .replace(/\\+/g, '%20')\n          .replace(/%3A/g, ':')\n          .replace(/%7E/g, '~')\n      : '';\n    return `${this.getXrayUrl()}#/${section}${queryParams}`;\n  }\n\n  private getXrayUrl(): string {\n    const region = this.instanceSettings.jsonData.defaultRegion!;\n    return `https://${region}.console.aws.amazon.com/xray/home?region=${region}`;\n  }\n\n  private transformSuggestDataFromTable(\n    suggestData: TSDBResponse\n  ): Array<{ text: string; value: string; label: string }> {\n    return suggestData.results['metricFindQuery'].tables[0].rows.map(value => ({\n      text: value,\n      value,\n      label: value,\n    }));\n  }\n\n  private parseResponse(response: DataFrame): DataFrame {\n    // TODO this would better be based on type but backend Go def does not have dataFrame.type\n    switch (response.name) {\n      case 'Traces':\n        return parseTraceResponse(response);\n      case 'TraceSummaries':\n        return parseTracesListResponse(response, this.instanceSettings.uid);\n      case 'InsightSummaries':\n        return this.parseInsightsResponse(response);\n      default:\n        return response;\n    }\n  }\n\n  private parseInsightsResponse(response: DataFrame): DataFrame {\n    const urlToAwsConsole = `${this.getXrayUrl()}#/insights/`;\n    const idField = response.fields.find(f => f.name === 'InsightId');\n    if (idField) {\n      idField.config.links = [{ title: '', url: urlToAwsConsole + '${__value.raw}', targetBlank: true }];\n    }\n    const duration = response.fields.find(f => f.name === 'Duration');\n\n    if (duration) {\n      duration.type = FieldType.string;\n      duration.display = val => {\n        const momentDuration = toDuration(val);\n        return {\n          numeric: val,\n          text: getDurationText(momentDuration),\n        };\n      };\n    }\n    return response;\n  }\n}\n\nfunction getDurationText(duration: DateTimeDuration) {\n  let result = '';\n\n  if (duration.hours()) {\n    result = `${duration.hours()} hours `;\n  }\n\n  if (duration.minutes()) {\n    result += `${duration.minutes()} minutes `;\n  }\n\n  if (duration.seconds()) {\n    result += `${duration.seconds()} seconds`;\n  }\n  return result;\n}\n\n/**\n The x-ray trace has a bit strange format where it comes as json and then some parts are string which also contains\n json, so some parts are escaped and we have to double parse that.\n */\nfunction parseTraceResponse(response: DataFrame): DataFrame {\n  // Again assuming this will ge single field with single value which will be the trace data blob\n  const traceData = response.fields[0].values.get(0);\n  const traceParsed: XrayTraceDataRaw = JSON.parse(traceData);\n\n  const parsedSegments = traceParsed.Segments.map(segment => {\n    return {\n      ...segment,\n      Document: JSON.parse(segment.Document),\n    } as XrayTraceDataSegment;\n  });\n  const traceParsedForReal: XrayTraceData = {\n    ...traceParsed,\n    Segments: parsedSegments,\n  };\n\n  return new MutableDataFrame({\n    name: 'Trace',\n    fields: [\n      {\n        name: 'trace',\n        type: FieldType.trace,\n        values: new ArrayVector([transformResponse(traceParsedForReal)]),\n      },\n    ],\n    meta: {\n      preferredVisualisationType: 'trace',\n    },\n  });\n}\n\n/**\n * Adds links to the Id field of the dataframe. This is later processed in grafana to create actual context dependant\n * link that works both in explore and in dashboards.\n * TODO This mutates the dataframe, probably just copy it but seems like new MutableDataframe(response) errors out\n */\nfunction parseTracesListResponse(response: DataFrame, datasourceUid: string): DataFrame {\n  const idField = response.fields.find(f => f.name === 'Id');\n  idField!.config.links = [\n    {\n      title: 'Trace: ${__value.raw}',\n      url: '',\n      internal: {\n        datasourceUid,\n        query: { query: '${__value.raw}', queryType: 'getTrace' },\n      },\n    },\n  ];\n  return response;\n}\n\nfunction processRequest(request: DataQueryRequest<XrayQuery>, templateSrv: TemplateSrv) {\n  return {\n    ...request,\n    targets: request.targets.map(target => {\n      let newTarget = {\n        ...target,\n      };\n\n      // Handle interval => resolution mapping\n      if (newTarget.queryType === XrayQueryType.getTimeSeriesServiceStatistics) {\n        if (request.intervalMs && !newTarget.resolution) {\n          const intervalSeconds = Math.floor(request.intervalMs / 1000);\n          newTarget.resolution = intervalSeconds <= 60 ? 60 : 300;\n        }\n      }\n\n      // Variable interpolation\n      newTarget.query = templateSrv.replace(newTarget.query, request.scopedVars);\n\n      // Add Group filter expression to the query filter expression. This seems to mimic what x-ray console is doing\n      // as there are APIs that do not expect group just the filter expression. At the same time some APIs like Insights\n      // do not accept filter expression just the groupARN so this will have to be adjusted for them.\n      if (target.group && target.group.FilterExpression && target.queryType !== XrayQueryType.getTrace) {\n        if (newTarget.query) {\n          newTarget.query = target.group.FilterExpression + ' AND ' + newTarget.query;\n        } else {\n          newTarget.query = target.group.FilterExpression;\n        }\n      }\n\n      return newTarget;\n    }),\n  };\n}\n","import React, { PureComponent } from 'react';\nimport { InlineFormLabel, LegacyForms, Button } from '@grafana/ui';\nconst { Select, Input } = LegacyForms;\nimport {\n  DataSourcePluginOptionsEditorProps,\n  onUpdateDatasourceJsonDataOptionSelect,\n  onUpdateDatasourceResetOption,\n  onUpdateDatasourceJsonDataOption,\n  onUpdateDatasourceSecureJsonDataOption,\n} from '@grafana/data';\nimport { SelectableValue } from '@grafana/data';\nimport { XrayJsonData, XraySecureJsonData } from './types';\n\nconst authProviderOptions = [\n  { label: 'Access & secret key', value: 'keys' },\n  { label: 'Credentials file', value: 'credentials' },\n  { label: 'ARN', value: 'arn' },\n] as SelectableValue[];\n\nexport type Props = DataSourcePluginOptionsEditorProps<XrayJsonData, XraySecureJsonData>;\n\nexport interface State {\n  regions: SelectableValue[];\n}\n\nexport class ConfigEditor extends PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      // TODO: we have an api to load this but the problem is at this moment we do not have credentials. We will have\n      //  them on the backend after saving the datasource\n      regions: defaultRegions.map((region: string) => ({\n        value: region,\n        label: region,\n      })),\n    };\n  }\n\n  render() {\n    const { regions } = this.state;\n    const { options } = this.props;\n    const secureJsonData = (options.secureJsonData || {}) as XraySecureJsonData;\n\n    return (\n      <>\n        <h3 className=\"page-heading\">X-Ray Details</h3>\n        <div className=\"gf-form-group\">\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <InlineFormLabel className=\"width-14\">Auth Provider</InlineFormLabel>\n              <Select\n                className=\"width-30\"\n                value={authProviderOptions.find(authProvider => authProvider.value === options.jsonData.authType)}\n                options={authProviderOptions}\n                defaultValue={options.jsonData.authType}\n                onChange={option => {\n                  if (options.jsonData.authType === 'arn' && option.value !== 'arn') {\n                    delete this.props.options.jsonData.assumeRoleArn;\n                  }\n                  onUpdateDatasourceJsonDataOptionSelect(this.props, 'authType')(option);\n                }}\n              />\n            </div>\n          </div>\n          {options.jsonData.authType === 'credentials' && (\n            <div className=\"gf-form-inline\">\n              <div className=\"gf-form\">\n                <InlineFormLabel\n                  className=\"width-14\"\n                  tooltip=\"Credentials profile name, as specified in ~/.aws/credentials, leave blank for default.\"\n                >\n                  Credentials Profile Name\n                </InlineFormLabel>\n                <div className=\"width-30\">\n                  <Input\n                    className=\"width-30\"\n                    placeholder=\"default\"\n                    value={options.jsonData.database}\n                    onChange={onUpdateDatasourceJsonDataOptionSelect(this.props, 'profile')}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n          {options.jsonData.authType === 'keys' && (\n            <div>\n              {options.secureJsonFields?.accessKey ? (\n                <div className=\"gf-form-inline\">\n                  <div className=\"gf-form\">\n                    <InlineFormLabel className=\"width-14\">Access Key ID</InlineFormLabel>\n                    <Input className=\"width-25\" placeholder=\"Configured\" disabled={true} />\n                  </div>\n                  <div className=\"gf-form\">\n                    <div className=\"max-width-30 gf-form-inline\">\n                      <Button\n                        variant=\"secondary\"\n                        type=\"button\"\n                        onClick={onUpdateDatasourceResetOption(this.props as any, 'accessKey')}\n                      >\n                        Reset\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"gf-form-inline\">\n                  <div className=\"gf-form\">\n                    <InlineFormLabel className=\"width-14\">Access Key ID</InlineFormLabel>\n                    <div className=\"width-30\">\n                      <Input\n                        className=\"width-30\"\n                        value={secureJsonData.accessKey || ''}\n                        onChange={onUpdateDatasourceSecureJsonDataOption(this.props, 'accessKey')}\n                      />\n                    </div>\n                  </div>\n                </div>\n              )}\n              {options.secureJsonFields?.secretKey ? (\n                <div className=\"gf-form-inline\">\n                  <div className=\"gf-form\">\n                    <InlineFormLabel className=\"width-14\">Secret Access Key</InlineFormLabel>\n                    <Input className=\"width-25\" placeholder=\"Configured\" disabled={true} />\n                  </div>\n                  <div className=\"gf-form\">\n                    <div className=\"max-width-30 gf-form-inline\">\n                      <Button\n                        variant=\"secondary\"\n                        type=\"button\"\n                        onClick={onUpdateDatasourceResetOption(this.props as any, 'secretKey')}\n                      >\n                        Reset\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"gf-form-inline\">\n                  <div className=\"gf-form\">\n                    <InlineFormLabel className=\"width-14\">Secret Access Key</InlineFormLabel>\n                    <div className=\"width-30\">\n                      <Input\n                        className=\"width-30\"\n                        value={secureJsonData.secretKey || ''}\n                        onChange={onUpdateDatasourceSecureJsonDataOption(this.props, 'secretKey')}\n                      />\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n          {options.jsonData.authType === 'arn' && (\n            <div className=\"gf-form-inline\">\n              <div className=\"gf-form\">\n                <InlineFormLabel className=\"width-14\" tooltip=\"ARN of Assume Role\">\n                  Assume Role ARN\n                </InlineFormLabel>\n                <div className=\"width-30\">\n                  <Input\n                    className=\"width-30\"\n                    placeholder=\"arn:aws:iam:*\"\n                    value={options.jsonData.assumeRoleArn || ''}\n                    onChange={onUpdateDatasourceJsonDataOption(this.props, 'assumeRoleArn')}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <InlineFormLabel\n                className=\"width-14\"\n                tooltip=\"Specify the region, such as for US West (Oregon) use ` us-west-2 ` as the region.\"\n              >\n                Default Region\n              </InlineFormLabel>\n              <Select\n                className=\"width-30\"\n                value={regions.find(region => region.value === options.jsonData.defaultRegion)}\n                options={regions}\n                defaultValue={options.jsonData.defaultRegion}\n                onChange={onUpdateDatasourceJsonDataOptionSelect(this.props, 'defaultRegion')}\n              />\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default ConfigEditor;\n\nconst defaultRegions = [\n  'ap-east-1',\n  'ap-northeast-1',\n  'ap-northeast-2',\n  'ap-northeast-3',\n  'ap-south-1',\n  'ap-southeast-1',\n  'ap-southeast-2',\n  'ca-central-1',\n  'cn-north-1',\n  'cn-northwest-1',\n  'eu-central-1',\n  'eu-north-1',\n  'eu-west-1',\n  'eu-west-2',\n  'eu-west-3',\n  'me-south-1',\n  'sa-east-1',\n  'us-east-1',\n  'us-east-2',\n  'us-gov-east-1',\n  'us-gov-west-1',\n  'us-iso-east-1',\n  'us-isob-east-1',\n  'us-west-1',\n  'us-west-2',\n];\n","import { XrayQueryType } from '../../types';\nimport { CascaderOption } from '@grafana/ui/components/Cascader/Cascader';\n\nexport type QueryTypeOption = CascaderOption & {\n  queryType?: XrayQueryType;\n  children?: QueryTypeOption[];\n};\n\nexport const traceListOption = { label: 'Trace List', value: 'traceList' };\nexport const insightsOption = { label: 'Insights', value: 'insights', queryType: XrayQueryType.getInsights };\nexport const traceStatisticsOption = {\n  label: 'Trace Statistics',\n  value: 'traceStatistics',\n  queryType: XrayQueryType.getTimeSeriesServiceStatistics,\n};\n\nexport const queryTypeOptions: QueryTypeOption[] = [\n  traceListOption,\n  traceStatisticsOption,\n  insightsOption,\n  {\n    label: 'Trace Analytics',\n    value: 'traceAnalytics',\n    children: [\n      {\n        value: 'rootCause',\n        label: 'Root Cause',\n        children: [\n          {\n            value: 'responseTime',\n            label: 'Response Time',\n            children: [\n              {\n                value: 'rootCauseService',\n                label: 'Root Cause',\n                queryType: XrayQueryType.getAnalyticsRootCauseResponseTimeService,\n              } as QueryTypeOption,\n              {\n                value: 'path',\n                label: 'Path',\n                queryType: XrayQueryType.getAnalyticsRootCauseResponseTimePath,\n              },\n            ],\n          },\n          {\n            value: 'error',\n            label: 'Error',\n            children: [\n              {\n                value: 'rootCauseService',\n                label: 'Root Cause',\n                queryType: XrayQueryType.getAnalyticsRootCauseErrorService,\n              },\n              {\n                value: 'path',\n                label: 'Path',\n                queryType: XrayQueryType.getAnalyticsRootCauseErrorPath,\n              },\n              {\n                value: 'message',\n                label: 'Error Message',\n                queryType: XrayQueryType.getAnalyticsRootCauseErrorMessage,\n              },\n            ],\n          },\n          {\n            value: 'fault',\n            label: 'Fault',\n            children: [\n              {\n                value: 'rootCauseService',\n                label: 'Root Cause',\n                queryType: XrayQueryType.getAnalyticsRootCauseFaultService,\n              },\n              {\n                value: 'path',\n                label: 'Path',\n                queryType: XrayQueryType.getAnalyticsRootCauseFaultPath,\n              },\n              {\n                value: 'message',\n                label: 'Error Message',\n                queryType: XrayQueryType.getAnalyticsRootCauseFaultMessage,\n              },\n            ],\n          },\n        ],\n      },\n      {\n        value: 'user',\n        label: 'End user impact',\n        queryType: XrayQueryType.getAnalyticsUser,\n      } as QueryTypeOption,\n      {\n        value: 'url',\n        label: 'URL',\n        queryType: XrayQueryType.getAnalyticsUrl,\n      },\n      {\n        value: 'statusCode',\n        label: 'HTTP status code',\n        queryType: XrayQueryType.getAnalyticsStatusCode,\n      },\n    ],\n  },\n];\n\nexport const columnNames: { [key: string]: string } = {\n  'ErrorStatistics.ThrottleCount': 'Throttle Count',\n  'ErrorStatistics.TotalCount': 'Error Count',\n  'FaultStatistics.TotalCount': 'Fault Count',\n  OkCount: 'Success Count',\n  TotalCount: 'Total Count',\n  'Computed.AverageResponseTime': 'Average Response Time',\n};\n\n// Dummy group that can be selected only in insights;\nexport const dummyAllGroup = { GroupName: 'All', GroupARN: 'All' };\n","import React, { useRef, useEffect } from 'react';\nimport Prism from 'prismjs';\nimport { Node } from 'slate';\nimport { QueryField, TypeaheadInput, TypeaheadOutput, BracesPlugin, SlatePrism } from '@grafana/ui';\nimport { ExploreQueryFieldProps } from '@grafana/data';\nimport { XrayDataSource } from 'DataSource';\nimport { XrayQuery, XrayJsonData, XrayQueryType } from 'types';\nimport { XRayLanguageProvider } from 'language_provider';\nimport { tokenizer } from 'syntax';\n\ninterface XRayQueryFieldProps extends ExploreQueryFieldProps<XrayDataSource, XrayQuery, XrayJsonData> {}\n\nconst PRISM_LANGUAGE = 'xray';\nconst plugins = [\n  BracesPlugin(),\n  SlatePrism({\n    onlyIn: (node: Node) => node.object === 'block' && node.type === 'code_block',\n    getSyntax: () => PRISM_LANGUAGE,\n  }),\n];\n\nexport function XRayQueryField(props: XRayQueryFieldProps) {\n  const queryType = useRef(props.query.queryType);\n\n  useEffect(() => {\n    queryType.current = props.query.queryType;\n  }, [props.query, props.query.queryType]);\n\n  useEffect(() => {\n    Prism.languages[PRISM_LANGUAGE] = tokenizer;\n  }, []);\n\n  const onChangeQuery = (value: string) => {\n    const { query, onChange } = props;\n    const nextQuery: XrayQuery = { ...query, query: value };\n    onChange(nextQuery);\n  };\n\n  const onTypeAhead = async (typeahead: TypeaheadInput): Promise<TypeaheadOutput> => {\n    const { datasource } = props;\n\n    // Only show suggestions for getTraceSummaries\n    if (!datasource.languageProvider || queryType.current === XrayQueryType.getTrace) {\n      return { suggestions: [] };\n    }\n\n    const xRayLanguageProvider = datasource.languageProvider as XRayLanguageProvider;\n\n    return await xRayLanguageProvider.provideCompletionItems(typeahead);\n  };\n\n  return (\n    <QueryField\n      additionalPlugins={plugins}\n      query={props.query.query}\n      portalOrigin=\"xray\"\n      onChange={onChangeQuery}\n      onTypeahead={onTypeAhead}\n      placeholder=\"Enter service name, annotation, trace ID.\"\n      onRunQuery={props.onRunQuery}\n    />\n  );\n}\n","import { Icon, InlineFormLabel, stylesFactory, Tooltip } from '@grafana/ui';\nimport { XRayQueryField } from './XRayQueryField';\nimport React from 'react';\nimport { queryTypeOptionToQueryType } from './QueryEditorForm';\nimport { XrayDataSource } from '../../DataSource';\nimport { css } from 'emotion';\nimport { XrayQuery } from '../../types';\nimport { QueryTypeOption } from './constants';\n\nconst getStyles = stylesFactory(() => ({\n  tooltipLink: css`\n    color: #33a2e5;\n    &:hover {\n      color: #33a2e5;\n      filter: brightness(120%);\n    }\n  `,\n}));\n\ntype Props = {\n  query: XrayQuery;\n  datasource: XrayDataSource;\n  onChange: (value: XrayQuery) => void;\n  onRunQuery: () => void;\n  selectedOptions: QueryTypeOption[];\n};\nexport function QuerySection(props: Props) {\n  const { datasource, query, onRunQuery, onChange, selectedOptions } = props;\n  const styles = getStyles();\n\n  const onRunQueryLocal = () => {\n    onChange(query);\n    // Only run query if it has value\n    if (query.query) {\n      onRunQuery();\n    }\n  };\n\n  return (\n    <div style={{ flex: 1, display: 'flex' }}>\n      <InlineFormLabel className=\"query-keyword\" width=\"auto\">\n        Query&nbsp;\n        <Tooltip\n          placement=\"top\"\n          content={\n            <span>\n              See{' '}\n              <a\n                href=\"https://docs.aws.amazon.com/xray/latest/devguide/xray-console-filters.html?icmpid=docs_xray_console\"\n                target=\"_blank\"\n                className={styles.tooltipLink}\n              >\n                X-Ray documentation\n              </a>{' '}\n              for filter expression help.\n            </span>\n          }\n          theme=\"info\"\n        >\n          <Icon className=\"gf-form-help-icon gf-form-help-icon--right-normal\" name=\"info-circle\" size=\"sm\" />\n        </Tooltip>\n      </InlineFormLabel>\n      <XRayQueryField\n        query={query}\n        history={[]}\n        datasource={datasource}\n        onRunQuery={onRunQueryLocal}\n        onChange={e => {\n          onChange({\n            ...query,\n            queryType: queryTypeOptionToQueryType(\n              selectedOptions.map(option => option.value),\n              e.query\n            ),\n            query: e.query,\n          });\n        }}\n      />\n    </div>\n  );\n}\n","import { stylesFactory } from '@grafana/ui';\nimport { css } from 'emotion';\nimport { XrayDataSource } from '../../DataSource';\nimport { XrayQuery } from '../../types';\nimport { TimeRange } from '@grafana/data';\nimport React from 'react';\n\nconst getStyles = stylesFactory(() => ({\n  container: css`\n    display: flex;\n  `,\n  link: css`\n    white-space: nowrap;\n  `,\n}));\ntype XrayLinksProps = {\n  datasource: XrayDataSource;\n  query: XrayQuery;\n  range?: TimeRange;\n};\nexport function XrayLinks({ datasource, query, range }: XrayLinksProps) {\n  const styles = getStyles();\n  return (\n    <div className={styles.container}>\n      {[\n        ['To X-Ray service map', datasource.getServiceMapUrl()],\n        ['Open in X-Ray console', datasource.getXrayUrlForQuery(query, range)],\n      ].map(([text, href]) => {\n        return (\n          <a href={href} target=\"_blank\" rel=\"noopener\" key={href}>\n            <span className={`gf-form-label gf-form-label--btn ${styles.link}`}>\n              <i className=\"fa fa-share-square-o\" />\n              &nbsp;{text}\n            </span>\n          </a>\n        );\n      })}\n    </div>\n  );\n}\n","import { Group, XrayJsonData, XrayQuery, XrayQueryType } from '../../types';\nimport { useInitQuery } from './useInitQuery';\nimport {\n  columnNames,\n  dummyAllGroup,\n  insightsOption,\n  QueryTypeOption,\n  queryTypeOptions,\n  traceListOption,\n  traceStatisticsOption,\n} from './constants';\nimport { ButtonCascader, InlineFormLabel, MultiSelect, Segment, stylesFactory } from '@grafana/ui';\nimport React from 'react';\nimport { QueryEditorProps } from '@grafana/data';\nimport { XrayDataSource } from '../../DataSource';\nimport { QuerySection } from './QuerySection';\nimport { css } from 'emotion';\nimport { XrayLinks } from './XrayLinks';\n\nfunction findOptionForQueryType(queryType: XrayQueryType, options: any = queryTypeOptions): QueryTypeOption[] {\n  for (const option of options) {\n    const selected: QueryTypeOption[] = [];\n    if (option.queryType === queryType) {\n      selected.push(option);\n      return selected;\n    }\n    if (option.children) {\n      const found = findOptionForQueryType(queryType, option.children);\n      if (found.length) {\n        selected.push(option, ...found);\n        return selected;\n      }\n    }\n  }\n  return [];\n}\n\n/**\n * We do some mapping of the actual queryTypes to options user can select. Mainly don't want user to choose\n * between trace list and single trace and we detect that based on query. So trace list option returns single trace\n * if query contains single traceID.\n */\nexport function queryTypeToQueryTypeOptions(queryType?: XrayQueryType): QueryTypeOption[] {\n  if (!queryType || queryType === XrayQueryType.getTimeSeriesServiceStatistics) {\n    return [traceStatisticsOption];\n  }\n\n  if (queryType === XrayQueryType.getTrace || queryType === XrayQueryType.getTraceSummaries) {\n    return [traceListOption];\n  }\n\n  if (queryType === XrayQueryType.getInsights) {\n    return [insightsOption];\n  }\n\n  return findOptionForQueryType(queryType);\n}\n\nexport function queryTypeOptionToQueryType(selected: string[], query: string): XrayQueryType {\n  if (selected[0] === traceListOption.value) {\n    const isTraceIdQuery = /^\\d-\\w{8}-\\w{24}$/.test(query.trim());\n    return isTraceIdQuery ? XrayQueryType.getTrace : XrayQueryType.getTraceSummaries;\n  } else {\n    let found: any = undefined;\n    for (const path of selected) {\n      found = (found?.children ?? queryTypeOptions).find((option: QueryTypeOption) => option.value === path);\n    }\n    return found.queryType;\n  }\n}\n\nconst getStyles = stylesFactory(() => ({\n  queryParamsRow: css`\n    flex-wrap: wrap;\n  `,\n  spring: css`\n    flex: 1;\n  `,\n}));\n\nexport type XrayQueryEditorFormProps = QueryEditorProps<XrayDataSource, XrayQuery, XrayJsonData> & { groups: Group[] };\nexport function QueryEditorForm({ query, onChange, datasource, onRunQuery, groups, range }: XrayQueryEditorFormProps) {\n  const selectedOptions = queryTypeToQueryTypeOptions(query.queryType);\n  useInitQuery(query, onChange, groups, datasource);\n\n  const allGroups = selectedOptions[0] === insightsOption ? [dummyAllGroup, ...groups] : groups;\n\n  const styles = getStyles();\n  return (\n    <div>\n      {selectedOptions[0] !== insightsOption && (\n        <div className=\"gf-form\">\n          <QuerySection\n            query={query}\n            datasource={datasource}\n            onChange={onChange}\n            onRunQuery={onRunQuery}\n            selectedOptions={selectedOptions}\n          />\n        </div>\n      )}\n      <div className={`gf-form ${styles.queryParamsRow}`}>\n        <div className=\"gf-form\">\n          <InlineFormLabel className=\"query-keyword\" width=\"auto\">\n            Query Type\n          </InlineFormLabel>\n          <ButtonCascader\n            value={selectedOptions.map(option => option.value)}\n            options={queryTypeOptions}\n            onChange={value => {\n              const newQueryType = queryTypeOptionToQueryType(value, query.query || '');\n              onChange({\n                ...query,\n                queryType: newQueryType,\n                columns: newQueryType === XrayQueryType.getTimeSeriesServiceStatistics ? ['all'] : undefined,\n              } as any);\n            }}\n          >\n            {selectedOptions[selectedOptions.length - 1].label}\n          </ButtonCascader>\n        </div>\n\n        <div className=\"gf-form\">\n          <InlineFormLabel className=\"query-keyword\" width=\"auto\">\n            Group\n          </InlineFormLabel>\n          <Segment\n            value={query.group?.GroupName}\n            options={allGroups.map((group: Group) => ({\n              value: group.GroupARN,\n              label: group.GroupName,\n            }))}\n            onChange={value => {\n              onChange({\n                ...query,\n                group: allGroups.find((g: Group) => g.GroupARN === value.value),\n              } as any);\n            }}\n          />\n        </div>\n\n        <div className=\"gf-form\">\n          {selectedOptions[0] === insightsOption && (\n            <div className=\"gf-form\">\n              <InlineFormLabel className=\"query-keyword\" width=\"auto\">\n                State\n              </InlineFormLabel>\n              <Segment\n                value={query.state ?? 'All'}\n                options={['All', 'Active', 'Closed'].map(val => ({ value: val, label: val }))}\n                onChange={value => {\n                  onChange({\n                    ...query,\n                    state: value.value,\n                  });\n                }}\n              />\n            </div>\n          )}\n        </div>\n\n        <div className=\"gf-form\">\n          {selectedOptions[0] === traceStatisticsOption && (\n            <div className=\"gf-form\" data-testid=\"resolution\" style={{ flexWrap: 'wrap' }}>\n              <InlineFormLabel className=\"query-keyword\" width=\"auto\">\n                Resolution\n              </InlineFormLabel>\n              <Segment\n                value={query.resolution ? query.resolution.toString() + 's' : 'auto'}\n                options={['auto', '60s', '300s'].map(val => ({ value: val, label: val }))}\n                onChange={({ value }) => {\n                  onChange({\n                    ...query,\n                    resolution: value === 'auto' ? undefined : parseInt(value!, 10),\n                  } as any);\n                }}\n              />\n            </div>\n          )}\n        </div>\n\n        {/* spring to push the sections apart */}\n        <div className={styles.spring} />\n        <XrayLinks datasource={datasource} query={query} range={range} />\n      </div>\n      {selectedOptions[0] === traceStatisticsOption && (\n        <div className=\"gf-form\" data-testid=\"column-filter\" style={{ flexWrap: 'wrap' }}>\n          <InlineFormLabel className=\"query-keyword\" width=\"auto\">\n            Columns\n          </InlineFormLabel>\n          <div style={{ flex: 1 }}>\n            <MultiSelect\n              allowCustomValue={false}\n              options={Object.keys(columnNames).map(c => ({\n                label: columnNames[c],\n                value: c,\n              }))}\n              value={(query.columns || []).map(c => ({\n                label: columnNames[c],\n                value: c,\n              }))}\n              onChange={values => onChange({ ...query, columns: values.map(v => v.value!) })}\n              closeMenuOnSelect={false}\n              isClearable={true}\n              placeholder=\"All columns\"\n              menuPlacement=\"bottom\"\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { Group, XrayQuery, XrayQueryType } from '../../types';\nimport { XrayDataSource } from '../../DataSource';\nimport { useEffect } from 'react';\nimport { dummyAllGroup } from './constants';\n\n/**\n * Inits the query on mount or on datasource change.\n */\nexport function useInitQuery(\n  query: XrayQuery,\n  onChange: (value: XrayQuery) => void,\n  groups: Group[],\n  dataSource: XrayDataSource\n) {\n  useEffect(() => {\n    // We assume here the \"Default\" group is always there but lets fallback to first group if not. In case there are\n    // no groups we don't have to actually crash as most queryTypes don't need group to be defined\n    const defaultGroup = groups.find((g: Group) => g.GroupName === 'Default') || groups[0];\n\n    // We assume that if there is no queryType during mount there should not be any query so we do not need to\n    // check if query has traceId or not as we do with the QueryTypeOptions mapping.\n    if (!query.queryType) {\n      onChange({\n        ...query,\n        queryType: XrayQueryType.getTraceSummaries,\n        query: '',\n        group: defaultGroup,\n      });\n    } else {\n      // Check if we can keep the group from previous x-ray datasource or we need to set it to default again.\n      let group = query.group;\n      let allGroups = groups;\n      if (query.queryType === XrayQueryType.getInsights) {\n        allGroups = [dummyAllGroup, ...groups];\n      }\n\n      let sameArnGroup = allGroups.find((g: Group) => g.GroupARN === query.group?.GroupARN);\n      if (!sameArnGroup) {\n        group = defaultGroup;\n      } else if (\n        // This is the case when the group changes ie has the same ARN but different filter for example. I assume this can\n        // happen but not 100% sure.\n        sameArnGroup.GroupName !== query.group?.GroupName ||\n        sameArnGroup.FilterExpression !== query.group?.FilterExpression\n      ) {\n        group = sameArnGroup;\n      }\n      if (group !== query.group) {\n        onChange({\n          ...query,\n          group: group,\n        });\n      }\n    }\n  }, [query, groups, onChange, dataSource]);\n}\n","import { ExploreStartPageProps } from '@grafana/data';\nimport { css } from 'emotion';\nimport React from 'react';\nimport { XrayQuery, XrayQueryType } from 'types';\n\nfunction renderExpression(expr: string, onClickExample: ExploreStartPageProps['onClickExample']) {\n  return (\n    <div\n      className=\"cheat-sheet-item__example\"\n      key={expr}\n      onClick={() =>\n        onClickExample({ refId: 'A', query: expr, queryType: XrayQueryType.getTraceSummaries } as XrayQuery)\n      }\n    >\n      <code>{expr}</code>\n    </div>\n  );\n}\n\nexport default function CheatSheet({ onClickExample }: ExploreStartPageProps) {\n  return (\n    <div>\n      <h2>X-Ray Cheat Sheet</h2>\n      <div className=\"cheat-sheet-item\">\n        <p>\n          <span>Use the search bar to display traces for a service, trace ID, or filter expression.</span>\n          <a target=\"_blank\" href=\"https://docs.aws.amazon.com/console/xray/xray-filter-expressions\">\n            Learn more\n          </a>\n        </p>\n        <div className=\"cheat-sheet-item__title\">Filter expressions</div>\n        <div>You can use custom expressions to narrow down your search.</div>\n        <div>Traces where response time was more than 5 seconds:</div>\n        {renderExpression('responsetime > 5', onClickExample)}\n        <div>Traces where the total duration was 5 to 8 seconds:</div>\n        <div>{renderExpression('duration > 5 AND duration < 8', onClickExample)}</div>\n        <div>\n          Traces that included a call to 'api.example.com' with a fault (500 series error) or response time above 2.5\n          seconds, and with one or more segments having an annotation named 'account' with value '12345':\n        </div>\n        <div>{renderExpression('service(\"api.example.com\") AND annotation.account = \"12345\"', onClickExample)}</div>\n        <div>\n          Traces where the service 'api.example.com' made a call to 'backend.example.com' that failed with a fault:\n        </div>\n        <div>{renderExpression('edge(\"api.example.com\", \"backend.example.com\")', onClickExample)}</div>\n        <div>\n          Traces where the URL begins with 'http://api.example.com/' and contains '/v2/' but does not reach a service\n          named 'api.example.com':\n        </div>\n        <div>\n          {renderExpression(\n            'http.url BEGINSWITH \"http://api.example.com/\" AND http.url CONTAINS \"/v2/\" AND !service(\"api.example.com\")',\n            onClickExample\n          )}\n        </div>\n        <div>Traces that completed successfully in under 3 seconds, including all downstream calls:</div>\n        <div>{renderExpression('ok !partial duration < 3', onClickExample)}</div>\n        <div>\n          If you have multiple services with the same name but different types, you can use an ID function to\n          distinguish between them in a service or edge filter expression:\n        </div>\n        <div>\n          {renderExpression('service(id(name: \"api.example.com\", type: \"AWS::EC2::Instance\"))', onClickExample)}\n        </div>\n        <div className=\"cheat-sheet-item\">\n          <div className=\"cheat-sheet-item__title\">Filter keywords</div>\n          <table\n            className={css`\n              td {\n                padding: 5px 10px 5px 10px;\n              }\n            `}\n          >\n            <thead>\n              <tr>\n                <th>Attribute</th>\n                <th>Type</th>\n                <th>Description</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>ok</td>\n                <td>Boolean</td>\n                <td>Response status code was 2XX Success.</td>\n              </tr>\n              <tr>\n                <td>error</td>\n                <td>Boolean</td>\n                <td>Response status code was 4XX Client Error.</td>\n              </tr>\n              <tr>\n                <td>fault</td>\n                <td>Boolean</td>\n                <td>Response status code was 5XX Server Error.</td>\n              </tr>\n              <tr>\n                <td>partial</td>\n                <td>Boolean</td>\n                <td>Request has incomplete segments.</td>\n              </tr>\n              <tr>\n                <td>responsetime</td>\n                <td>Number</td>\n                <td>Time that the server took to send a response.</td>\n              </tr>\n              <tr>\n                <td>duration</td>\n                <td>Number</td>\n                <td>Total request duration including all downstream calls.</td>\n              </tr>\n              <tr>\n                <td>http.status</td>\n                <td>Number</td>\n                <td>Response status code.</td>\n              </tr>\n              <tr>\n                <td>http.url</td>\n                <td>String</td>\n                <td>Request URL.</td>\n              </tr>\n              <tr>\n                <td>http.method</td>\n                <td>String</td>\n                <td>Request method.</td>\n              </tr>\n              <tr>\n                <td>http.useragent</td>\n                <td>String</td>\n                <td>Request user agent string.</td>\n              </tr>\n              <tr>\n                <td>http.clientip</td>\n                <td>String</td>\n                <td>Requestor's IP address.</td>\n              </tr>\n              <tr>\n                <td>user</td>\n                <td>String</td>\n                <td>Value of user field on any segment in the trace.</td>\n              </tr>\n              <tr>\n                <td>annotation.*key*</td>\n                <td>String</td>\n                <td>Value of annotation with field *key*.</td>\n              </tr>\n              <tr>\n                <td>service(*name*) {}</td>\n                <td>Complex</td>\n                <td>\n                  Service with name *name*. Optional curly braces can contain a filter expression that applies to\n                  segments created by the service.\n                </td>\n              </tr>\n              <tr>\n                <td>edge(*source*, *destination*) {}</td>\n                <td>Complex</td>\n                <td>\n                  Connection between services *source* and *destination*. Optional curly braces can contain a filter\n                  expression that applies to segments on this connection.\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { DataSourcePlugin } from '@grafana/data';\nimport { XrayDataSource } from './DataSource';\nimport { ConfigEditor } from './ConfigEditor';\nimport { QueryEditor } from './components/QueryEditor/QueryEditor';\nimport { XrayQuery, XrayJsonData, XraySecureJsonData } from './types';\nimport CheatSheet from './components/CheatSheet';\n\nexport const plugin = new DataSourcePlugin<XrayDataSource, XrayQuery, XrayJsonData, XraySecureJsonData>(XrayDataSource)\n  .setConfigEditor(ConfigEditor)\n  .setExploreStartPage(CheatSheet)\n  .setQueryEditor(QueryEditor);\n","import React from 'react';\nimport { Spinner } from '@grafana/ui';\nimport { useGroups } from './useGroups';\nimport { QueryEditorForm, XrayQueryEditorFormProps } from './QueryEditorForm';\n\n/**\n * Simple wrapper that is only responsible to load groups and delay actual render of the QueryEditorForm. Main reason\n * for that is that there is queryInit code that requires groups to be already loaded and is separate hook and it\n * cannot be inside a condition. There are other ways to put it into single component but this seems cleaner than\n * alternatives.\n */\nexport function QueryEditor(props: Omit<XrayQueryEditorFormProps, 'groups'>) {\n  const groups = useGroups(props.datasource);\n  // We need this wrapper to wait for the groups and only after that run the useInitQuery as it needs to know the groups\n  // at that point.\n  if (!groups) {\n    return <Spinner />;\n  } else {\n    return <QueryEditorForm {...{ ...props, groups: groups }} />;\n  }\n}\n","import { XrayDataSource } from '../../DataSource';\nimport { Group } from '../../types';\nimport { useEffect, useState } from 'react';\n\nexport function useGroups(datasource: XrayDataSource): Group[] | undefined {\n  const [groups, setGroups] = useState<Group[] | undefined>(undefined);\n\n  useEffect(() => {\n    // This should run in case we change between different x-ray datasources and so should clear old groups.\n    setGroups(undefined);\n    datasource.getGroups().then(groups => {\n      setGroups(groups);\n    });\n  }, [datasource]);\n  return groups;\n}\n"],"sourceRoot":""}